# QuickSell

[ENGLISH DOCUMENTATION](https://github.com/Gafoneo/QuickSell/blob/main/README.md)

[РУССКАЯ ДОКУМЕНТАЦИЯ](https://github.com/Gafoneo/QuickSell/blob/main/README_ru.md)

## Описание:

Позволяет продавать хлам на компании с помощью команд в чате. Позволяет (временно или навсегда) добавлять предметы в черный список и задавать приоритет при продаже. Работает и на модовых лунах!  

Мод работает даже если он есть только у вас.

## Кратко:

<details open>
  <summary>Нажмите, чтобы свернуть/развернуть</summary>

### Продажа

- Если вам нужно получить `<amount>` денег в сумме (с учётом overtime), используйте `/sell <amount> -eo`

- Если вам нужно иметь `<amount>` больше, чем у вас уже есть (с учётом overtime): используйте `/sell <amount> -o`

- Если вы просто хотите продать предметы на `<amount>`, используйте `/sell <amount>`

- Если вы хотите продать ровно на квоту, используйте `/sell quota`

- Если вы хотите продать все предметы на корабле, используйте `/sell all`

- Если вы хотите продать предмет ОПРЕДЕЛЁННОГО ТИПА, держите этот предмет в руках и используйте `/sell item`

- Если вы хотите посмотреть текущий overtime, используйте `/ot`

### Черный список

- Чтобы добавить (убрать) предмет в конфиг черного списка (навсегда), используйте `/sell bl + -p` (`/sell bl - -p`), держа предмет в руках  

- Чтобы добавить (убрать) предмет во временный черный список (очищается при закрытии игры), используйте `/sell bl +` (`/sell bl -`), держа предмет в руках  

- Чтобы очистить временный черный список, используйте `/sell bl empty`

- Чтобы вывести черный список, используйте `/sell bl [-a] [-p]`

### Приоритет

- Чтобы добавить (убрать) предмет в конфиг приоритетов навсегда, используйте `/sell pr + -p` (`/sell pr - -p`), держа предмет в руках  

- Чтобы добавить (убрать) предмет во временный список приоритетов (очищается при закрытии игры), используйте `/sell pr +` (`/sell pr -`), держа предмет в руках  

- Чтобы очистить временный список приоритетов, используйте `/sell pr empty`

- Чтобы вывести список приоритетов, используйте `/sell pr [-a] [-p]`

</details>

## Использование:

<details open>
  <summary>Нажмите, чтобы свернуть/развернуть</summary>

Подробная информация по каждой команде и её использованию есть в игровой документации (страницы помощи).  

- `/sell help [page]` — открыть общую или конкретную страницу помощи
- `/sell help pages` — открыть список всех страниц помощи
- `/sell item [item]` — продать все предметы такого же типа, как тот, что у вас в руках, или указанный в команде
- `/sell quota [-a]` — продать ровно на квоту
- `/sell all [-a]` — продать весь доступный (нефильтрованный) хлам
- `/sell <amount> [-o] [-e] [-a] [-n]` — продать ровно нужную сумму
- `/sell {bl | pr} [-a] [-p]` — показать черный список/приоритеты
- `/sell {bl | pr} {+ | -} [-p]` — добавить/убрать предмет во временный (или постоянный с флагом -p) список
- `/sell {bl | pr} empty` — очистить временный список  
- `/ot [-n]` — посмотреть бонус за пересдачу

</details>

## Флаги:

<details open>
  <summary>Нажмите, чтобы свернуть/развернуть</summary>

#### Для каждого флага есть отдельные страницы помощи

- `-o` `(overtime)` — продажа с учетом бонуса (используется с <amount>, часто вместе с -e)  
- `-e` `(existing)` — учет уже имеющихся денег и бонуса (почти всегда вместе с -o)  
- `-a` `(all)` — игнорировать черный список (используется с quota, all, <amount>)  
- `-p` `(permanent)` — для `/sell {bl | pr}` позволяет изменять постоянный список вместо временного  
- `-n` `(nonrestart)` — заставляет мод считать бонус, считая, что перезахода не было (редкие случаи при модах для позднего входа клиента)  

</details>

## Подробное объяснение

### Функции

<details>
  <summary>Нажмите, чтобы свернуть/развернуть</summary>

#### Черный список

Черный список указывает моду, какие предметы не продавать. Существует три (четыре) вида: постоянный, временный(add), временный(remove) и активный.
- Постоянный черный список загружается из конфига при запуске игры. Лучше не редактировать его вручную, а использовать команды в игре, указанные далее.  
- Временные черные списки (их два, но работают они только вместе) создаются при запуске Lethal Company и удаляются при закрытии окна.  
- Активный список = постоянный + временный(add) − временный(remove). Именно он реально используется при продаже.  

#### Приоритет

Список приоритетов указывает, какие предметы продавать в первую очередь. Работает аналогично черному списку (постоянный, временный и активный).  
- Постоянный список приоритетов загружается из конфига при запуске игры. Лучше не редактировать его вручную, а использовать команды в игре, указанные далее.  
- Временные списки приоритетов (их два, но работают они только вместе) создаются при запуске Lethal Company и удаляются при закрытии окна.  
- Активный список = постоянный + временный(add) − временный(remove). Именно он реально используется при продаже.  

</details>


### Commands

<details>
  <summary>Click to collapse/expand</summary>

#### Item

Использование:

`/sell item [item]`

Продает все предметы с указанным именем. Если имя не было указано, берет имя предмета у вас в руках (и сдает этот предмет тоже)

#### Quota

Использование:

`/sell quota [-a]`

Проверяет, сколько квоты осталось и пытается сдать ровно это число (если скрапа недостаточно для этого, ничего не будет сдано, а если ровно это число недостижимо, сдано будет минимальное возможное число после этого)

#### All

Использование:

`/sell all [-a]`

Продает весь (не в черном списке, используйте -a, чтобы игнорировать черный список) скрап

#### Amount

Использование:

`/sell <amount> [-o] [-e] [-a] [-n]`

Пытается продать для получения указанного числа денег (с учетом флагов). Если скрапа недостаточно для этого, ничего не будет сдано, а если ровно это число недостижимо, сдано будет минимальное возможное число после этого

#### Blacklist

Использование:

`/sell bl [-a] [-p]`

`/sell bl {add | ad | a | +} [itemName] [-p]`

`/sell bl {remove | rm | r | -} [itemName] [-p]`

`/sell bl {empty | flash | flush}`

Без аргументов печатает активный черный список, можно добавить -a чтобы так же отобразить временный черный список или -p чтобы отобразить постоянный черный список вместо этого
Используя `/sell bl +` (`/sell bl -`) вы можете временно добавить в черный список (или запретить предмету быть в черном списке) предмет у вас в руках. Вы так же можете добавлять/убирать его из постоянного черного списка использовав флаг -p
Используя `/sell bl empty` вы можете очистить временный черный список, если он вам больше не нужен (имейте ввиду, что он автоматически чистится после закрытия окна)\

#### Priority

Использование:

`/sell pr [-a] [-p]`

`/sell pr {add | ad | a | +} [itemName] [-p]`

`/sell pr {remove | rm | r | -} [itemName] [-p]`

`/sell pr {empty | flash | flush}`

Без аргументов печатает активный список приоритетов, можно добавить -a чтобы так же отобразить временный список приоритетов или -p чтобы отобразить постоянный список приоритетов вместо этого
Используя `/sell pr +` (`/sell pr -`) вы можете временно добавить в список приоритетов (или запретить предмету быть в списке приоритетов) предмет у вас в руках. Вы так же можете добавлять/убирать его из постоянного списка приоритетов использовав флаг -p
Используя `/sell pr empty` вы можете очистить временный список приоритетов, если он вам больше не нужен (имейте ввиду, что он автоматически чистится после закрытия окна)\

#### Бонус

Использование:

`/ot [-n]`

Показывает бонус, основанный на уже заполненной квоте и предметах на кассе

</details>

### Флаги

<details>
  <summary>Click to collapse/expand</summary>

### -o

Использование:

`/sell <amount> -o`

Учитывает тот факт, что сданные модом предметы тоже добавят бонус и добавляет его в вычисления (заметьте, что бонус, добавленный уже сданными до этого предметами не добавляется в расчеты, для этого нужно использовать флаг -e) так, чтобы:

запрошенное число = итоговое число в терминале (после взлета с планеты) - существующие деньги (информация о них написана на странице о флаге -e)

### -e

Usage:

`/sell <amount> -e`

(До этого -t, был поменян на -e)

Вычитает существующие деньги (уже присутствующие деньги в терминале, предметы на кассе и, если присутствует флаг -o будущий бонус, основанный на этих двух) из запрошенного значения так, чтобы:

запрошенное число = итоговое число в терминале (после взлета с планеты) = существующие деньги + сданные предметы (+ бонус основанный на сданных предметах, если присутствует флаг -o)

### -a

Использование:

`/sell {quota | all | amount | bl | pr} -a`

При поиске предметов для продажи игнорирует все черные списки, так что *КАЖДЫЙ* скрап можно продать.  
Если использовать вместе с `/sell bl` или `/sell pr`, будут показаны оба временных черных списка (или списки приоритетов) вместе с активным.

### -p

Использование:

`/sell {bl | pr} [+ | -] -p`

При использовании команды черного списка (или приоритетного списка) этот флаг позволяет работать с **постоянным** черным списком (или набором приоритетов) вместо временного.

### -n

Использование:

`/sell <amount> -n`

Принудительно заставляет все расчеты бонуса, которые происходят при выполнении этой команды, считать, что после последнего дня квоты **не было перезахода**, даже если он был.  

Этот флаг нужен только если у хоста есть мод для позднего присоединения (LateCompany), и вы присоединились после последнего дня квоты (ваш клиент подумает, что хост был).

Проверить реально ли был повторный хост почти невозможно (по крайней мере, мне неизвестно, если знаете способ — напишите мне, буду очень благодарен).  

Если перезахода не было, а мод думает, что он был, все расчеты бонуса будут на 15 меньше. Этот флаг исправляет это.  
Но если хост **НА САМОМ ДЕЛЕ** перезашел и вы используете этот флаг, бонус будут на 15 больше, так что лучше уточните у хоста, был ли он или нет.

</details>

## Пример использования:

Вы приземлились в компании после последнего дня второй квоты, квота равна 256.  
В терминале осталось 4 кредита, и вы планируете купить: джетпак (900), вид киллер (25*2) и отправиться в Артифис (1500).
Можно просто использовать:

`/sell 900+25*2+1500 -eo`

Мод попытается продать на 2094, бонус составит 352, плюс 4 кредита в терминале, всего 2094+352+4=2450 — точно как нужно.  

Теперь предположим, что вы купили джетпак и два вид киллера, но заметили, что у вас нет лопат.  
Вы решаете купить две (30*2).  

Используем:

`/sell 60 -o`

Мод игнорирует текущие кредиты и бонус (потому что флага -e нет) и добавляет 60 новых (кредитов+бонус).  
Мод попытается продать 50, бонус составит 10, всего получится 60, как и было запрошено.

## Сообщение о проблемах/запросы функций

Если вы хотите сообщить об ошибке или предложить новую функцию, добро пожаловать на мой [GitHub](https://github.com/Gafoneo/QuickSell/issues)

## Благодарности

- Спасибо **baer1** за YetAnotherSellMod, от которого пошёл этот мод  
- Спасибо **baer1** за ChatCommandAPI — отличный инструмент для работы с чат-командами  
- Спасибо **Zehs** за SellMyScrap, вдохновивший меня на создание этого мода
- Спасибо **NutNutty** за логику в SellTracker, которая позволяет отслеживать предметы на кассе за клиента